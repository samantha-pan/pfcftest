---
layout: default
title: 商品取得範例
nav_order: 0
parent: 教學
permalink: /教學/商品取得範例
--- 

```python
!pip install - r requirements.txt
#安裝顯示表格套件
!pip install pandas
```


```python
##API初始&登入
import pfcf
from pfcf.pfcf import *
from pfcf.product import *
from pfcf.trade.ddata import *
from typing import List
#匯入顯示資料套件
import pandas as pd 
from IPython.display import display, clear_output
pd.set_option('display.max_columns', None)
pd.set_option('display.max_rows', None)
pd.set_option('display.width', None)
#初始API
api = Pfcf()
#錯誤事件處理
api.on_error = lambda error: print(f'api錯誤 {error}')
#系統登入
loginresponse = api.login(
    "http://test167.pfctrade.com", "80009808401", "j19810916", 'PSC_A226097195_20250310.pfx', '12345678')#url,帳號,密碼,憑證檔名,憑證密碼
#顯示登入結果
print(loginresponse) 
print(f"登入旗標{api.login_status_flag}")
print(f"交易帳號{api.get_accounts()}") 
```


```python
# 內期商品取得範例
# 初始數據
data = [['', '', '', '', '']]
dd = pd.DataFrame(data)
dd.columns = ['商品代號', '商品名稱', '股票代碼', '類別', '合約基數']
p09s = api.get_p09s()
i = 0
for key, value in p09s.items():
    print(data)
    dd.loc[i, '商品代號'] = value.kind_id
    dd.loc[i, '商品名稱'] = value.name
    dd.loc[i, '股票代碼'] = value.stock_id
    dd.loc[i, '類別'] = value.subtype
    dd.loc[i, '合約基數'] = value.contract_size
    i = i+1
clear_output(wait=True)
display(dd)

```


```python
# 內期期貨合約取得範例  
# 初始數據
data = [['','','','','','','']]
dd = pd.DataFrame(data)
dd.columns = ['商品代號','年月','CP','履約價','漲停價','跌停價','參考價']
query_response = api.get_p08mf("TXF")#商品類別碼
if query_response.ok == True:
    i=0
    for data in query_response.data:   
        dd.loc[i,'商品代號']=data.prod_id
        dd.loc[i,'年月']=data.month
        dd.loc[i,'CP']=data.cp
        dd.loc[i,'履約價']=data.stikeprice
        dd.loc[i,'漲停價']=data.maxprice
        dd.loc[i,'跌停價']=data.minprice
        dd.loc[i,'參考價']=data.premium 
        i=i+1 
    clear_output(wait=True)
    display(dd)
else:
    print(query_response.error)

```


```python
# 內期選擇權合約取得範例  
# 初始數據
data = [['','','','','','','']]
dd = pd.DataFrame(data)
dd.columns = ['商品代號','年月','CP','履約價','漲停價','跌停價','參考價']
query_response = api.get_p08m("TXO")#商品類別碼
if query_response.ok == True:
    i=0
    for data in query_response.data:   
        dd.loc[i,'商品代號']=data.prod_id
        dd.loc[i,'年月']=data.month
        dd.loc[i,'CP']=data.cp
        dd.loc[i,'履約價']=data.stikeprice
        dd.loc[i,'漲停價']=data.maxprice
        dd.loc[i,'跌停價']=data.minprice
        dd.loc[i,'參考價']=data.premium 
        i=i+1 
    clear_output(wait=True)
    display(dd)
else:
    print(query_response.error)

```


```python
# 外期交易所取得範例
# 初始數據
data = [['', '', '', '']]
dd = pd.DataFrame(data)
dd.columns = ['交易所', '中文名稱', '區域', '幣別']
exchanges = api.get_exchanges()
i = 0
for key, value in exchanges.items():
    print(data)
    dd.loc[i, '交易所'] = value.exchange
    dd.loc[i, '中文名稱'] = value.name
    dd.loc[i, '區域'] = value.country
    dd.loc[i, '幣別'] = value.currency 
    i = i+1
clear_output(wait=True)
display(dd) 
```


```python
# 外期商品取得範例
# 初始數據
data = [['', '', '', '', '', '', '']]
dd = pd.DataFrame(data)
dd.columns = ['交易所', '商品代碼', '類型(期貨:F 選擇權:O)','中文名稱','中文簡稱','區域', '幣別']
symboldatas = api.get_symboldatas()
i = 0
for key, value in symboldatas.items():
    print(data)
    dd.loc[i, '交易所'] = value.exchange
    dd.loc[i, '商品代碼'] = value.symbol
    dd.loc[i, '類型(期貨:F 選擇權:O)'] = value.type
    dd.loc[i, '中文名稱'] = value.name 
    dd.loc[i, '中文簡稱'] = value.shortname 
    dd.loc[i, '區域'] = value.country 
    dd.loc[i, '幣別'] = value.currency 
    i = i+1
clear_output(wait=True)
display(dd)  
```


```python
# 外期商品取得範例
# 初始數據
data = [['', '', '', '', '', '', '']]
dd = pd.DataFrame(data) 
dd.columns = ['交易所', '商品代碼', '類型(期貨:F 選擇權:O)','年月','履約價','call put', '最後交易日'] 
query_response =api.get_symbol_contract("CME","NQ","F")#交易所代碼,商品代碼,F:期貨O:選擇權
if query_response.ok == True:
    i=0
    for data in query_response.data:   
        dd.loc[i, '交易所'] = data.exchange
        dd.loc[i, '商品代碼'] = data.symbol
        dd.loc[i, '類型(期貨:F 選擇權:O)'] = data.type
        dd.loc[i, '年月'] = data.monthyear 
        dd.loc[i, '履約價'] = data.strikeprice 
        dd.loc[i, 'call put'] = data.cp 
        dd.loc[i, '最後交易日'] = data.lasttradedate 
        i=i+1 
    clear_output(wait=True)
    display(dd)
else:
    print(query_response.error)
```


```python
#系統登出
api.logout()
print('登出完畢')
print(f"登入旗標{api.login_status_flag}")

```
[API Documentation/product]({{ "/API/product" | relative_url }})